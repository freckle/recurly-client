{-# LANGUAGE MultiWayIf #-}
-- CHANGE WITH CAUTION: This is a generated code file generated by https://github.com/Haskell-OpenAPI-Code-Generator/Haskell-OpenAPI-Client-Code-Generator.
{-# LANGUAGE OverloadedStrings #-}

-- | Contains the types generated from the schema SubscriptionAddOnCreate
module RecurlyClient.Types.SubscriptionAddOnCreate where

import qualified Control.Monad.Fail
import qualified Data.Aeson
import qualified Data.Aeson as Data.Aeson.Encoding.Internal
import qualified Data.Aeson as Data.Aeson.Types
import qualified Data.Aeson as Data.Aeson.Types.FromJSON
import qualified Data.Aeson as Data.Aeson.Types.Internal
import qualified Data.Aeson as Data.Aeson.Types.ToJSON
import qualified Data.ByteString
import qualified Data.ByteString as Data.ByteString.Internal
import qualified Data.Foldable
import qualified Data.Functor
import qualified Data.Maybe
import qualified Data.Scientific
import qualified Data.Text
import qualified Data.Text as Data.Text.Internal
import qualified Data.Time.Calendar as Data.Time.Calendar.Days
import qualified Data.Time.LocalTime as Data.Time.LocalTime.Internal.ZonedTime
import qualified GHC.Base
import qualified GHC.Classes
import qualified GHC.Int
import qualified GHC.Show
import qualified GHC.Types
import qualified RecurlyClient.Common
import RecurlyClient.TypeAlias
import {-# SOURCE #-} RecurlyClient.Types.SubscriptionAddOnPercentageTier
import {-# SOURCE #-} RecurlyClient.Types.SubscriptionAddOnTier
import qualified Prelude as GHC.Integer.Type
import qualified Prelude as GHC.Maybe

-- | Defines the object schema located at @components.schemas.SubscriptionAddOnCreate@ in the specification.
data SubscriptionAddOnCreate = SubscriptionAddOnCreate
    { subscriptionAddOnCreateAdd_on_source :: (GHC.Maybe.Maybe SubscriptionAddOnCreateAdd_on_source)
    -- ^ add_on_source: Used to determine where the associated add-on data is pulled from. If this value is set to
    -- \`plan_add_on\` or left blank, then add-on data will be pulled from the plan\'s add-ons. If the associated
    -- \`plan\` has \`allow_any_item_on_subscriptions\` set to \`true\` and this field is set to \`item\`, then
    -- the associated add-on data will be pulled from the site\'s item catalog.
    , subscriptionAddOnCreateCode :: Data.Text.Internal.Text
    -- ^ code: If \`add_on_source\` is set to \`plan_add_on\` or left blank, then plan\'s add-on \`code\` should be used.
    -- If \`add_on_source\` is set to \`item\`, then the \`code\` from the associated item should be used.
    --
    --
    -- Constraints:
    --
    -- * Maximum length of 50
    , subscriptionAddOnCreatePercentage_tiers :: (GHC.Maybe.Maybe (GHC.Base.NonEmpty SubscriptionAddOnPercentageTier))
    -- ^ percentage_tiers: If percentage tiers are provided in the request, all existing percentage tiers on the Subscription Add-on will be
    -- removed and replaced by the percentage tiers in the request. There must be one tier without ending_amount value
    -- which represents the final tier. Use only if add_on.tier_type is tiered or volume and add_on.usage_type is
    -- percentage. This feature is currently in development and requires approval and enablement, please contact support.
    --
    --
    -- Constraints:
    --
    -- * Must have a minimum of 1 items
    , subscriptionAddOnCreateQuantity :: (GHC.Maybe.Maybe GHC.Types.Int)
    -- ^ quantity
    --
    -- Constraints:
    --
    -- * Minimum  of 0.0
    , subscriptionAddOnCreateRevenue_schedule_type :: (GHC.Maybe.Maybe SubscriptionAddOnCreateRevenue_schedule_type)
    -- ^ revenue_schedule_type
    , subscriptionAddOnCreateTiers :: (GHC.Maybe.Maybe (GHC.Base.NonEmpty SubscriptionAddOnTier))
    -- ^ tiers: If the plan add-on\'s \`tier_type\` is \`flat\`, then \`tiers\` must be absent. The \`tiers\` object
    -- must include one to many tiers with \`ending_quantity\` and \`unit_amount\`.
    -- There must be one tier without an \`ending_quantity\` value which represents the final tier.
    -- See our [Guide](https:\/\/recurly.com\/developers\/guides\/item-addon-guide.html)
    -- for an overview of how to configure quantity-based pricing models.
    --
    --
    -- Constraints:
    --
    -- * Must have a minimum of 1 items
    , subscriptionAddOnCreateUnit_amount :: (GHC.Maybe.Maybe GHC.Types.Float)
    -- ^ unit_amount: Allows up to 2 decimal places. Optionally, override the add-on\'s default unit amount.
    -- If the plan add-on\'s \`tier_type\` is \`tiered\`, \`volume\`, or \`stairstep\`, then \`unit_amount\` cannot be provided.
    --
    --
    -- Constraints:
    --
    -- * Maxium  of 1000000.0
    -- * Minimum  of 0.0
    , subscriptionAddOnCreateUnit_amount_decimal :: (GHC.Maybe.Maybe Data.Text.Internal.Text)
    -- ^ unit_amount_decimal: Allows up to 9 decimal places.  Optionally, override the add-on\'s default unit amount.
    -- If the plan add-on\'s \`tier_type\` is \`tiered\`, \`volume\`, or \`stairstep\`, then \`unit_amount_decimal\` cannot be provided.
    -- Only supported when the plan add-on\'s \`add_on_type\` = \`usage\`.
    -- If \`unit_amount_decimal\` is provided, \`unit_amount\` cannot be provided.
    --
    --
    -- Constraints:
    --
    -- * Maxium  of 1000000.0
    -- * Minimum  of 0.0
    , subscriptionAddOnCreateUsage_percentage :: (GHC.Maybe.Maybe GHC.Types.Float)
    -- ^ usage_percentage: The percentage taken of the monetary amount of usage tracked. This can be up to 4 decimal places. A value between 0.0 and 100.0. Required if \`add_on_type\` is usage and \`usage_type\` is percentage. Must be omitted otherwise. \`usage_percentage\` does not support tiers. See our [Guide](https:\/\/recurly.com\/developers\/guides\/usage-based-billing-guide.html) for an overview of how to configure usage add-ons.
    --
    -- Constraints:
    --
    -- * Maxium  of 100.0
    -- * Minimum  of 0.0
    }
    deriving
        ( GHC.Show.Show
        , GHC.Classes.Eq
        )

instance Data.Aeson.Types.ToJSON.ToJSON SubscriptionAddOnCreate where
    toJSON obj = Data.Aeson.Types.Internal.object (Data.Foldable.concat (Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("add_on_source" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateAdd_on_source obj) : ["code" Data.Aeson.Types.ToJSON..= subscriptionAddOnCreateCode obj] : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("percentage_tiers" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreatePercentage_tiers obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("quantity" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateQuantity obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("revenue_schedule_type" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateRevenue_schedule_type obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("tiers" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateTiers obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("unit_amount" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateUnit_amount obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("unit_amount_decimal" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateUnit_amount_decimal obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("usage_percentage" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateUsage_percentage obj) : GHC.Base.mempty))
    toEncoding obj = Data.Aeson.Encoding.Internal.pairs (GHC.Base.mconcat (Data.Foldable.concat (Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("add_on_source" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateAdd_on_source obj) : ["code" Data.Aeson.Types.ToJSON..= subscriptionAddOnCreateCode obj] : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("percentage_tiers" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreatePercentage_tiers obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("quantity" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateQuantity obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("revenue_schedule_type" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateRevenue_schedule_type obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("tiers" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateTiers obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("unit_amount" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateUnit_amount obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("unit_amount_decimal" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateUnit_amount_decimal obj) : Data.Maybe.maybe GHC.Base.mempty (GHC.Base.pure GHC.Base.. ("usage_percentage" Data.Aeson.Types.ToJSON..=)) (subscriptionAddOnCreateUsage_percentage obj) : GHC.Base.mempty)))
instance Data.Aeson.Types.FromJSON.FromJSON SubscriptionAddOnCreate where
    parseJSON = Data.Aeson.Types.FromJSON.withObject "SubscriptionAddOnCreate" (\obj -> ((((((((GHC.Base.pure SubscriptionAddOnCreate GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..:? "add_on_source")) GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..: "code")) GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..:? "percentage_tiers")) GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..:? "quantity")) GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..:? "revenue_schedule_type")) GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..:? "tiers")) GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..:? "unit_amount")) GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..:? "unit_amount_decimal")) GHC.Base.<*> (obj Data.Aeson.Types.FromJSON..:? "usage_percentage"))

-- | Create a new 'SubscriptionAddOnCreate' with all required fields.
mkSubscriptionAddOnCreate ::
    -- | 'subscriptionAddOnCreateCode'
    Data.Text.Internal.Text ->
    SubscriptionAddOnCreate
mkSubscriptionAddOnCreate subscriptionAddOnCreateCode =
    SubscriptionAddOnCreate
        { subscriptionAddOnCreateAdd_on_source = GHC.Maybe.Nothing
        , subscriptionAddOnCreateCode = subscriptionAddOnCreateCode
        , subscriptionAddOnCreatePercentage_tiers = GHC.Maybe.Nothing
        , subscriptionAddOnCreateQuantity = GHC.Maybe.Nothing
        , subscriptionAddOnCreateRevenue_schedule_type = GHC.Maybe.Nothing
        , subscriptionAddOnCreateTiers = GHC.Maybe.Nothing
        , subscriptionAddOnCreateUnit_amount = GHC.Maybe.Nothing
        , subscriptionAddOnCreateUnit_amount_decimal = GHC.Maybe.Nothing
        , subscriptionAddOnCreateUsage_percentage = GHC.Maybe.Nothing
        }

{- | Defines the enum schema located at @components.schemas.SubscriptionAddOnCreate.properties.add_on_source@ in the specification.

Used to determine where the associated add-on data is pulled from. If this value is set to
\`plan_add_on\` or left blank, then add-on data will be pulled from the plan\'s add-ons. If the associated
\`plan\` has \`allow_any_item_on_subscriptions\` set to \`true\` and this field is set to \`item\`, then
the associated add-on data will be pulled from the site\'s item catalog.
-}
data SubscriptionAddOnCreateAdd_on_source
    = -- | This case is used if the value encountered during decoding does not match any of the provided cases in the specification.
      SubscriptionAddOnCreateAdd_on_sourceOther Data.Aeson.Types.Internal.Value
    | -- | This constructor can be used to send values to the server which are not present in the specification yet.
      SubscriptionAddOnCreateAdd_on_sourceTyped Data.Text.Internal.Text
    | -- | Represents the JSON value @"plan_add_on"@
      SubscriptionAddOnCreateAdd_on_sourceEnumPlan_add_on
    | -- | Represents the JSON value @"item"@
      SubscriptionAddOnCreateAdd_on_sourceEnumItem
    deriving (GHC.Show.Show, GHC.Classes.Eq)

instance Data.Aeson.Types.ToJSON.ToJSON SubscriptionAddOnCreateAdd_on_source where
    toJSON (SubscriptionAddOnCreateAdd_on_sourceOther val) = val
    toJSON (SubscriptionAddOnCreateAdd_on_sourceTyped val) = Data.Aeson.Types.ToJSON.toJSON val
    toJSON (SubscriptionAddOnCreateAdd_on_sourceEnumPlan_add_on) = "plan_add_on"
    toJSON (SubscriptionAddOnCreateAdd_on_sourceEnumItem) = "item"
instance Data.Aeson.Types.FromJSON.FromJSON SubscriptionAddOnCreateAdd_on_source where
    parseJSON val =
        GHC.Base.pure
            ( if
                | val GHC.Classes.== "plan_add_on" -> SubscriptionAddOnCreateAdd_on_sourceEnumPlan_add_on
                | val GHC.Classes.== "item" -> SubscriptionAddOnCreateAdd_on_sourceEnumItem
                | GHC.Base.otherwise -> SubscriptionAddOnCreateAdd_on_sourceOther val
            )

-- | Defines the enum schema located at @components.schemas.SubscriptionAddOnCreate.properties.revenue_schedule_type@ in the specification.
data SubscriptionAddOnCreateRevenue_schedule_type
    = -- | This case is used if the value encountered during decoding does not match any of the provided cases in the specification.
      SubscriptionAddOnCreateRevenue_schedule_typeOther Data.Aeson.Types.Internal.Value
    | -- | This constructor can be used to send values to the server which are not present in the specification yet.
      SubscriptionAddOnCreateRevenue_schedule_typeTyped Data.Text.Internal.Text
    | -- | Represents the JSON value @"at_range_end"@
      SubscriptionAddOnCreateRevenue_schedule_typeEnumAt_range_end
    | -- | Represents the JSON value @"at_range_start"@
      SubscriptionAddOnCreateRevenue_schedule_typeEnumAt_range_start
    | -- | Represents the JSON value @"evenly"@
      SubscriptionAddOnCreateRevenue_schedule_typeEnumEvenly
    | -- | Represents the JSON value @"never"@
      SubscriptionAddOnCreateRevenue_schedule_typeEnumNever
    deriving (GHC.Show.Show, GHC.Classes.Eq)

instance Data.Aeson.Types.ToJSON.ToJSON SubscriptionAddOnCreateRevenue_schedule_type where
    toJSON (SubscriptionAddOnCreateRevenue_schedule_typeOther val) = val
    toJSON (SubscriptionAddOnCreateRevenue_schedule_typeTyped val) = Data.Aeson.Types.ToJSON.toJSON val
    toJSON (SubscriptionAddOnCreateRevenue_schedule_typeEnumAt_range_end) = "at_range_end"
    toJSON (SubscriptionAddOnCreateRevenue_schedule_typeEnumAt_range_start) = "at_range_start"
    toJSON (SubscriptionAddOnCreateRevenue_schedule_typeEnumEvenly) = "evenly"
    toJSON (SubscriptionAddOnCreateRevenue_schedule_typeEnumNever) = "never"
instance Data.Aeson.Types.FromJSON.FromJSON SubscriptionAddOnCreateRevenue_schedule_type where
    parseJSON val =
        GHC.Base.pure
            ( if
                | val GHC.Classes.== "at_range_end" -> SubscriptionAddOnCreateRevenue_schedule_typeEnumAt_range_end
                | val GHC.Classes.== "at_range_start" -> SubscriptionAddOnCreateRevenue_schedule_typeEnumAt_range_start
                | val GHC.Classes.== "evenly" -> SubscriptionAddOnCreateRevenue_schedule_typeEnumEvenly
                | val GHC.Classes.== "never" -> SubscriptionAddOnCreateRevenue_schedule_typeEnumNever
                | GHC.Base.otherwise -> SubscriptionAddOnCreateRevenue_schedule_typeOther val
            )
